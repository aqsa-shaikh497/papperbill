const playIconSrc = "https://vyaparwebsiteimages.vypcdn.in/marketing-images/images/web-invoicing/play_btn_icon.svg";
let isEverythingForBusinessCreateFunctionExecuted = false;
    let currentIndex_v = 0;
    var intervalId_v;
	if(screen.width<=600)
		{
 var dotContainer = document.createElement('div');
        dotContainer.className = 'dots_tab';
				let left_arrow_dots = document.createElement("span");
					let left_arrow_image = document.createElement("img");
					left_arrow_image.src = "https://vyaparapp.in/v/z/wp-content/uploads/2024/02/left-angle-bg.svg";
					left_arrow_dots.appendChild(left_arrow_image);
	left_arrow_dots.addEventListener('click', function(){
		carouselArrowClicked(currentIndex_v, -1);
	});
	dotContainer.appendChild(left_arrow_dots);
					let imgCheckMark, imgPhoneIcon, textFreeDemo;
		}
	function carouselArrowClicked(index, movedir){
		
		updateContent_v(currentIndex_v==0?(tabData_v.length+movedir)%tabData_v.length:(currentIndex_v+movedir)%tabData_v.length);
	}
    function createTabs_v() {
			let businessTabsDetails = document.querySelectorAll('.tab-everything-for-business-2-detail');
			 imgCheckMark = document.querySelector('.tab-everything-for-business-check-mark').getElementsByTagName('img')[0];
			 imgPhoneIcon = document.querySelector('.tab-everything-for-business-phone').getElementsByTagName('img')[0];
			textFreeDemo = document.querySelector('.tab-everything-for-business-demo-text');
			document.querySelector('.heading-all-feature').innerHTML = document.querySelector('.tab-everything-for-business-heading').innerHTML;
			document.querySelector('.tab-everything-for-business-heading').remove();
			document.querySelector('.tab-everything-for-business-2-group').remove();
			imgCheckMark.remove();
			imgPhoneIcon.remove();
			textFreeDemo.remove();
				const tabEverythingForBusinessContainer = document.querySelector('.tab-everything-for-business-container');
			const businessTabsDetailsArr = [];
			businessTabsDetails.forEach((tabDetails)=>{
				const imageTag = tabDetails.children[1].getElementsByTagName('img')[0];
				const tabDetailsObj = {
					title:tabDetails.children[0].innerHTML,
					imageUrl:imageTag.getAttribute('data-src') || imageTag.src,
					text:tabDetails.children[2].innerHTML,
					points: Array.from(tabDetails.children[3].children[0].children).map(para=>{
						return para.innerHTML;
					})
				};
				businessTabsDetailsArr.push(tabDetailsObj);
			});
			tabData_v = businessTabsDetailsArr;
			
			const tabEverythingForBusinessColumn = document.querySelector('.everything-for-business-cols');
	tabEverythingForBusinessColumn.append(tabEverythingForBusinessContainer);
			        var tabContainer_v = document.getElementById('tabContainer-v');

				if(screen.width>600)
					{
        var tabs_v = document.createElement('div');
        tabs_v.classList.add('tabs-v');
						tabData_v.forEach(function (tab, index) {
            var tabElement_v = document.createElement('div');
            tabElement_v.classList.add('tab-v');
            tabElement_v.textContent = tab.title;

            tabElement_v.addEventListener('click', function () {
							currentIndex_v=index;
                updateContent_v(currentIndex_v);
            });
							 tabs_v.appendChild(tabElement_v);       				
        });
						 tabContainer_v.appendChild(tabs_v);
					}
			else{
				tabData_v.forEach(function (tab, index) {
 						var dot = document.createElement('span');
            dot.className = 'dot_tab';
            dot.onclick = function () {
                updateContent_v(index);
            };
            dotContainer.appendChild(dot);
        });
				
			}
			
				

        var contentContainer_v = document.createElement('div');
        contentContainer_v.classList.add('content-v');
        tabContainer_v.appendChild(contentContainer_v);

        var imageContainer_v = document.createElement('div');
        imageContainer_v.classList.add('image-container-v');
        contentContainer_v.appendChild(imageContainer_v);

        var textContainer_v = document.createElement('div');
        textContainer_v.classList.add('text-container-v');
        contentContainer_v.appendChild(textContainer_v);
				imageContainer_v.addEventListener("click",()=>{
										clearInterval(intervalId_v);
					let imageContainer_v = document.querySelector('.image-container-v');
					imageContainer_v.style.backgroundImage="";
					imageContainer_v.innerHTML = '<iframe width="100%" height="100%" src="https://www.youtube.com/embed/-dUMQl0KeOM?autoplay=1&mute=1"></iframe>';
				});
        // Initial content update
			if(screen.width<=600)
			{
				  let right_arrow_dots = document.createElement("span");
					let right_arrow_image = document.createElement("img");
				  right_arrow_image.src = "https://vyaparapp.in/v/z/wp-content/uploads/2024/02/right-angle-bg.svg";
					right_arrow_dots.appendChild(right_arrow_image);
					right_arrow_dots.addEventListener('click', function(){
								carouselArrowClicked(currentIndex_v, 1);
					});
					dotContainer.appendChild(right_arrow_dots);			
			contentContainer_v.appendChild(dotContainer);
			}
        updateContent_v(currentIndex_v);
    }
	
    function updateContent_v(index) {
				currentIndex_v = index;
			if(screen.width>600)
				{
        var tabs_v = document.querySelectorAll('.tab-v');
        tabs_v.forEach(function (tab) {
            tab.classList.remove('selected');
        });
        tabs_v[index].classList.add('selected');
				}
        var imageContainer_v = document.querySelector('.image-container-v');
        let textContainer_v = document.querySelector('.text-container-v');
textContainer_v.innerHTML = "";
					imageContainer_v.style.backgroundImage="url("+tabData_v[index].imageUrl+")";
					imageContainer_v.role="img";
					imageContainer_v.title=tabData_v[index].title;
        imageContainer_v.innerHTML = `<div class="play-icon-v" style="background-image:url('${playIconSrc}')" role="img" title="play-icon"/>`;
			
				let featureDesc = document.createElement('div');
				featureDesc.classList.add("desc");
				featureDesc.innerHTML = tabData_v[index].text;
				let featurePoints	= document.createElement('div');
				 tabData_v[index].points.forEach(point=>{
							featurePoints.innerHTML +=  `<div><img alt='${imgCheckMark.alt}' src='${imgCheckMark.getAttribute('data-src') || imgCheckMark.src}' width="16" height="16"/><span class='pointText'>${point}</span></div>`;
				});
				
			let demoText = document.createElement('span');
			demoText.classList.add("freeDemo");
			demoText.innerHTML = `<img alt='${imgPhoneIcon.alt}' src='${imgPhoneIcon.getAttribute('data-src') || imgPhoneIcon.src}' width="20" height="53"/><p class='demoText'>${textFreeDemo.innerHTML}</p>`;
			demoText.addEventListener("click",()=>{
		let modal = document.getElementById('myModal-demo');
    $('#myModal-demo').modal('show');
			});
        textContainer_v.appendChild(featureDesc);
			textContainer_v.appendChild(featurePoints);
						textContainer_v.appendChild(demoText);
			showSlide(index);
    }
    function showSlide(index) {
 						clearInterval(intervalId_v);
			if(screen.width<=600)
				{
					var dots = document.getElementsByClassName('dot_tab');
        for (var i = 0; i < tabData_v.length; i++) {
            dots[i].classList.remove('active');
        }
        dots[index].classList.add('active');
				}
				currentSlide = index;
			 intervalId_v =  setInterval(function () {
            updateContent_v((currentSlide + 1) % tabData_v.length);
        }, 5000);
        
    }
	
    // Call the function to create tabs
   window.addEventListener('scroll', ()=>{
			 if(window.pageYOffset>500 && !isEverythingForBusinessCreateFunctionExecuted)
				 {
					 isEverythingForBusinessCreateFunctionExecuted = true;
					 createTabs_v();
				 }
		 });
    
	document.getElementById("cancel-demo").addEventListener("click",()=>{
		$('#myModal-demo').modal('hide');
	});
	
		document.getElementById("submit-demo").addEventListener("click",()=>{
		$('#myModal-demo').modal('hide');
	});
